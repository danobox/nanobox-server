package data

import (
	"time"

	"github.com/nanobox-core/nanobox-server/config"
	"github.com/nanobox-core/nanobox-server/tasks"
)

//
type EVar struct {
	AppID     string    `json:"app_id"`     //
	CreatedAt time.Time `json:"created_at"` //
	ID        string    `json:"id"`         //
	Internal  bool      `json:"internal"`   //
	ServiceID string    `json:"service_id"` //
	Title     string    `json:"title"`      //
	UpdatedAt time.Time `json:"updated_at"` //
	Value     string    `json:"value"`      //
}

//
func (e *EVar) Collection() string {
	return "evars"
}

//
func (e *EVar) Id() string {
	return e.ID
}

//
func (e *EVar) Process() {

	ch := make(chan string)
	defer close(ch)

	go func() {
		for data := range ch {
			config.Mist.Publish([]string{e.Collection()}, data)
		}
	}()

	container := tasks.Container{}
	network := tasks.Network{}

	//
	ch <- "Doing container things..."
	container.Install(ch)

	//
	ch <- "Doing install things..."
	network.Install(ch)

	// mega publish
	ch <- "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fringilla nisl at turpis molestie varius. Ut eget quam ex. Donec facilisis, urna a tincidunt tincidunt, nisi lacus ultrices tellus, sit amet ornare lectus dui vitae leo. Quisque iaculis sem a ultrices viverra. Aliquam bibendum pretium posuere. Sed mollis eget tortor sagittis gravida. Ut rutrum non sem at facilisis. Mauris quis orci lorem. Cras placerat ligula turpis, quis egestas libero rutrum eu. Etiam commodo vitae odio non ornare. Aliquam erat volutpat. Duis ut tincidunt urna, vel iaculis lorem. Praesent porttitor semper libero, quis sodales erat. Nunc vestibulum malesuada finibus. Phasellus ac interdum est. Curabitur molestie hendrerit libero, ac convallis quam mollis a. Sed hendrerit mauris interdum, malesuada eros at, vestibulum sem. Aliquam pharetra pulvinar eros, vitae tristique ante sollicitudin eget. In placerat interdum augue et mollis. Nunc lobortis elit quis purus elementum, eget iaculis nisl pretium. Ut felis justo, rhoncus sed tellus ac, aliquet eleifend neque. Donec maximus lorem quis nunc aliquet finibus. Nullam eget dignissim velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus fermentum tortor et mi interdum, nec ornare nulla hendrerit. Suspendisse nec velit quis erat mattis venenatis. Sed maximus felis vitae varius pretium. Vestibulum nec eros faucibus, pellentesque enim a, sodales metus. In non pretium nunc. Donec quam libero, viverra tempor bibendum vel, placerat vel tellus. Aliquam non scelerisque odio, convallis tincidunt ex. Donec a enim dui. Vivamus vel lacus rhoncus, faucibus ex in, sagittis sem. Phasellus non dui in neque egestas egestas sed id sem. Phasellus aliquam pellentesque velit a feugiat. Nulla facilisi. Vestibulum sed lorem eu eros consequat ornare nec quis ante. Ut vel velit quis mauris sodales finibus. Integer ut tortor purus. Quisque ac iaculis nunc. Sed varius, nisl eget egestas viverra, justo purus scelerisque lorem, et pharetra metus justo vel dui. Integer non tincidunt diam, id hendrerit lacus. Proin porta neque a augue gravida, quis eleifend magna hendrerit. Nullam posuere placerat neque, vel vulputate nunc viverra dignissim. Nulla vitae urna quis mauris auctor feugiat quis eu mauris. Cras congue a lacus ornare dictum. Mauris sed tristique magna, et posuere mauris. Sed hendrerit a tortor eget condimentum. Nam euismod urna ut metus vehicula, at facilisis arcu hendrerit. Integer erat justo, placerat eget urna eu, convallis faucibus libero. Phasellus vel orci arcu. Nullam eget feugiat magna. Suspendisse auctor dapibus neque, in accumsan elit posuere in. Etiam consequat sapien vitae odio commodo feugiat. Nunc non lacinia ligula, vel tempus nisi. Nullam risus purus, dapibus et erat posuere, efficitur aliquet augue. Donec orci purus, feugiat sit amet maximus et, sagittis sit amet velit. Aliquam eleifend ipsum massa, quis efficitur neque luctus eu. Aliquam ut cursus odio, a dictum massa. Mauris sodales sem eu mauris rhoncus commodo. Vestibulum elementum eros a leo dapibus cursus. Nam rutrum metus ut magna malesuada lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fringilla nisl at turpis molestie varius. Ut eget quam ex. Donec facilisis, urna a tincidunt tincidunt, nisi lacus ultrices tellus, sit amet ornare lectus dui vitae leo. Quisque iaculis sem a ultrices viverra. Aliquam bibendum pretium posuere. Sed mollis eget tortor sagittis gravida. Ut rutrum non sem at facilisis. Mauris quis orci lorem. Cras placerat ligula turpis, quis egestas libero rutrum eu. Etiam commodo vitae odio non ornare. Aliquam erat volutpat. Duis ut tincidunt urna, vel iaculis lorem. Praesent porttitor semper libero, quis sodales erat. Nunc vestibulum malesuada finibus. Phasellus ac interdum est. Curabitur molestie hendrerit libero, ac convallis quam mollis a. Sed hendrerit mauris interdum, malesuada eros at, vestibulum sem. Aliquam pharetra pulvinar eros, vitae tristique ante sollicitudin eget. In placerat interdum augue et mollis. Nunc lobortis elit quis purus elementum, eget iaculis nisl pretium. Ut felis justo, rhoncus sed tellus ac, aliquet eleifend neque. Donec maximus lorem quis nunc aliquet finibus. Nullam eget dignissim velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus fermentum tortor et mi interdum, nec ornare nulla hendrerit. Suspendisse nec velit quis erat mattis venenatis. Sed maximus felis vitae varius pretium. Vestibulum nec eros faucibus, pellentesque enim a, sodales metus. In non pretium nunc. Donec quam libero, viverra tempor bibendum vel, placerat vel tellus. Aliquam non scelerisque odio, convallis tincidunt ex. Donec a enim dui. Vivamus vel lacus rhoncus, faucibus ex in, sagittis sem. Phasellus non dui in neque egestas egestas sed id sem. Phasellus aliquam pellentesque velit a feugiat. Nulla facilisi. Vestibulum sed lorem eu eros consequat ornare nec quis ante. Ut vel velit quis mauris sodales finibus. Integer ut tortor purus. Quisque ac iaculis nunc. Sed varius, nisl eget egestas viverra, justo purus scelerisque lorem, et pharetra metus justo vel dui. Integer non tincidunt diam, id hendrerit lacus. Proin porta neque a augue gravida, quis eleifend magna hendrerit. Nullam posuere placerat neque, vel vulputate nunc viverra dignissim. Nulla vitae urna quis mauris auctor feugiat quis eu mauris. Cras congue a lacus ornare dictum. Mauris sed tristique magna, et posuere mauris. Sed hendrerit a tortor eget condimentum. Nam euismod urna ut metus vehicula, at facilisis arcu hendrerit. Integer erat justo, placerat eget urna eu, convallis faucibus libero. Phasellus vel orci arcu. Nullam eget feugiat magna. Suspendisse auctor dapibus neque, in accumsan elit posuere in. Etiam consequat sapien vitae odio commodo feugiat. Nunc non lacinia ligula, vel tempus nisi. Nullam risus purus, dapibus et erat posuere, efficitur aliquet augue. Donec orci purus, feugiat sit amet maximus et, sagittis sit amet velit. Aliquam eleifend ipsum massa, quis efficitur neque luctus eu. Aliquam ut cursus odio, a dictum massa. Mauris sodales sem eu mauris rhoncus commodo. Vestibulum elementum eros a leo dapibus cursus. Nam rutrum metus ut magna malesuada lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fringilla nisl at turpis molestie varius. Ut eget quam ex. Donec facilisis, urna a tincidunt tincidunt, nisi lacus ultrices tellus, sit amet ornare lectus dui vitae leo. Quisque iaculis sem a ultrices viverra. Aliquam bibendum pretium posuere. Sed mollis eget tortor sagittis gravida. Ut rutrum non sem at facilisis. Mauris quis orci lorem. Cras placerat ligula turpis, quis egestas libero rutrum eu. Etiam commodo vitae odio non ornare. Aliquam erat volutpat. Duis ut tincidunt urna, vel iaculis lorem. Praesent porttitor semper libero, quis sodales erat. Nunc vestibulum malesuada finibus. Phasellus ac interdum est. Curabitur molestie hendrerit libero, ac convallis quam mollis a. Sed hendrerit mauris interdum, malesuada eros at, vestibulum sem. Aliquam pharetra pulvinar eros, vitae tristique ante sollicitudin eget. In placerat interdum augue et mollis. Nunc lobortis elit quis purus elementum, eget iaculis nisl pretium. Ut felis justo, rhoncus sed tellus ac, aliquet eleifend neque. Donec maximus lorem quis nunc aliquet finibus. Nullam eget dignissim velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus fermentum tortor et mi interdum, nec ornare nulla hendrerit. Suspendisse nec velit quis erat mattis venenatis. Sed maximus felis vitae varius pretium. Vestibulum nec eros faucibus, pellentesque enim a, sodales metus. In non pretium nunc. Donec quam libero, viverra tempor bibendum vel, placerat vel tellus. Aliquam non scelerisque odio, convallis tincidunt ex. Donec a enim dui. Vivamus vel lacus rhoncus, faucibus ex in, sagittis sem. Phasellus non dui in neque egestas egestas sed id sem. Phasellus aliquam pellentesque velit a feugiat. Nulla facilisi. Vestibulum sed lorem eu eros consequat ornare nec quis ante. Ut vel velit quis mauris sodales finibus. Integer ut tortor purus. Quisque ac iaculis nunc. Sed varius, nisl eget egestas viverra, justo purus scelerisque lorem, et pharetra metus justo vel dui. Integer non tincidunt diam, id hendrerit lacus. Proin porta neque a augue gravida, quis eleifend magna hendrerit. Nullam posuere placerat neque, vel vulputate nunc viverra dignissim. Nulla vitae urna quis mauris auctor feugiat quis eu mauris. Cras congue a lacus ornare dictum. Mauris sed tristique magna, et posuere mauris. Sed hendrerit a tortor eget condimentum. Nam euismod urna ut metus vehicula, at facilisis arcu hendrerit. Integer erat justo, placerat eget urna eu, convallis faucibus libero. Phasellus vel orci arcu. Nullam eget feugiat magna. Suspendisse auctor dapibus neque, in accumsan elit posuere in. Etiam consequat sapien vitae odio commodo feugiat. Nunc non lacinia ligula, vel tempus nisi. Nullam risus purus, dapibus et erat posuere, efficitur aliquet augue. Donec orci purus, feugiat sit amet maximus et, sagittis sit amet velit. Aliquam eleifend ipsum massa, quis efficitur neque luctus eu. Aliquam ut cursus odio, a dictum massa. Mauris sodales sem eu mauris rhoncus commodo. Vestibulum elementum eros a leo dapibus cursus. Nam rutrum metus ut magna malesuada lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fringilla nisl at turpis molestie varius. Ut eget quam ex. Donec facilisis, urna a tincidunt tincidunt, nisi lacus ultrices tellus, sit amet ornare lectus dui vitae leo. Quisque iaculis sem a ultrices viverra. Aliquam bibendum pretium posuere. Sed mollis eget tortor sagittis gravida. Ut rutrum non sem at facilisis. Mauris quis orci lorem. Cras placerat ligula turpis, quis egestas libero rutrum eu. Etiam commodo vitae odio non ornare. Aliquam erat volutpat. Duis ut tincidunt urna, vel iaculis lorem. Praesent porttitor semper libero, quis sodales erat. Nunc vestibulum malesuada finibus. Phasellus ac interdum est. Curabitur molestie hendrerit libero, ac convallis quam mollis a. Sed hendrerit mauris interdum, malesuada eros at, vestibulum sem. Aliquam pharetra pulvinar eros, vitae tristique ante sollicitudin eget. In placerat interdum augue et mollis. Nunc lobortis elit quis purus elementum, eget iaculis nisl pretium. Ut felis justo, rhoncus sed tellus ac, aliquet eleifend neque. Donec maximus lorem quis nunc aliquet finibus. Nullam eget dignissim velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus fermentum tortor et mi interdum, nec ornare nulla hendrerit. Suspendisse nec velit quis erat mattis venenatis. Sed maximus felis vitae varius pretium. Vestibulum nec eros faucibus, pellentesque enim a, sodales metus. In non pretium nunc. Donec quam libero, viverra tempor bibendum vel, placerat vel tellus. Aliquam non scelerisque odio, convallis tincidunt ex. Donec a enim dui. Vivamus vel lacus rhoncus, faucibus ex in, sagittis sem. Phasellus non dui in neque egestas egestas sed id sem. Phasellus aliquam pellentesque velit a feugiat. Nulla facilisi. Vestibulum sed lorem eu eros consequat ornare nec quis ante. Ut vel velit quis mauris sodales finibus. Integer ut tortor purus. Quisque ac iaculis nunc. Sed varius, nisl eget egestas viverra, justo purus scelerisque lorem, et pharetra metus justo vel dui. Integer non tincidunt diam, id hendrerit lacus. Proin porta neque a augue gravida, quis eleifend magna hendrerit. Nullam posuere placerat neque, vel vulputate nunc viverra dignissim. Nulla vitae urna quis mauris auctor feugiat quis eu mauris. Cras congue a lacus ornare dictum. Mauris sed tristique magna, et posuere mauris. Sed hendrerit a tortor eget condimentum. Nam euismod urna ut metus vehicula, at facilisis arcu hendrerit. Integer erat justo, placerat eget urna eu, convallis faucibus libero. Phasellus vel orci arcu. Nullam eget feugiat magna. Suspendisse auctor dapibus neque, in accumsan elit posuere in. Etiam consequat sapien vitae odio commodo feugiat. Nunc non lacinia ligula, vel tempus nisi. Nullam risus purus, dapibus et erat posuere, efficitur aliquet augue. Donec orci purus, feugiat sit amet maximus et, sagittis sit amet velit. Aliquam eleifend ipsum massa, quis efficitur neque luctus eu. Aliquam ut cursus odio, a dictum massa. Mauris sodales sem eu mauris rhoncus commodo. Vestibulum elementum eros a leo dapibus cursus. Nam rutrum metus ut magna malesuada lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fringilla nisl at turpis molestie varius. Ut eget quam ex. Donec facilisis, urna a tincidunt tincidunt, nisi lacus ultrices tellus, sit amet ornare lectus dui vitae leo. Quisque iaculis sem a ultrices viverra. Aliquam bibendum pretium posuere. Sed mollis eget tortor sagittis gravida. Ut rutrum non sem at facilisis. Mauris quis orci lorem. Cras placerat ligula turpis, quis egestas libero rutrum eu. Etiam commodo vitae odio non ornare. Aliquam erat volutpat. Duis ut tincidunt urna, vel iaculis lorem. Praesent porttitor semper libero, quis sodales erat. Nunc vestibulum malesuada finibus. Phasellus ac interdum est. Curabitur molestie hendrerit libero, ac convallis quam mollis a. Sed hendrerit mauris interdum, malesuada eros at, vestibulum sem. Aliquam pharetra pulvinar eros, vitae tristique ante sollicitudin eget. In placerat interdum augue et mollis. Nunc lobortis elit quis purus elementum, eget iaculis nisl pretium. Ut felis justo, rhoncus sed tellus ac, aliquet eleifend neque. Donec maximus lorem quis nunc aliquet finibus. Nullam eget dignissim velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus fermentum tortor et mi interdum, nec ornare nulla hendrerit. Suspendisse nec velit quis erat mattis venenatis. Sed maximus felis vitae varius pretium. Vestibulum nec eros faucibus, pellentesque enim a, sodales metus. In non pretium nunc. Donec quam libero, viverra tempor bibendum vel, placerat vel tellus. Aliquam non scelerisque odio, convallis tincidunt ex. Donec a enim dui. Vivamus vel lacus rhoncus, faucibus ex in, sagittis sem. Phasellus non dui in neque egestas egestas sed id sem. Phasellus aliquam pellentesque velit a feugiat. Nulla facilisi. Vestibulum sed lorem eu eros consequat ornare nec quis ante. Ut vel velit quis mauris sodales finibus. Integer ut tortor purus. Quisque ac iaculis nunc. Sed varius, nisl eget egestas viverra, justo purus scelerisque lorem, et pharetra metus justo vel dui. Integer non tincidunt diam, id hendrerit lacus. Proin porta neque a augue gravida, quis eleifend magna hendrerit. Nullam posuere placerat neque, vel vulputate nunc viverra dignissim. Nulla vitae urna quis mauris auctor feugiat quis eu mauris. Cras congue a lacus ornare dictum. Mauris sed tristique magna, et posuere mauris. Sed hendrerit a tortor eget condimentum. Nam euismod urna ut metus vehicula, at facilisis arcu hendrerit. Integer erat justo, placerat eget urna eu, convallis faucibus libero. Phasellus vel orci arcu. Nullam eget feugiat magna. Suspendisse auctor dapibus neque, in accumsan elit posuere in. Etiam consequat sapien vitae odio commodo feugiat. Nunc non lacinia ligula, vel tempus nisi. Nullam risus purus, dapibus et erat posuere, efficitur aliquet augue. Donec orci purus, feugiat sit amet maximus et, sagittis sit amet velit. Aliquam eleifend ipsum massa, quis efficitur neque luctus eu. Aliquam ut cursus odio, a dictum massa. Mauris sodales sem eu mauris rhoncus commodo. Vestibulum elementum eros a leo dapibus cursus. Nam rutrum metus ut magna malesuada lobortis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum fringilla nisl at turpis molestie varius. Ut eget quam ex. Donec facilisis, urna a tincidunt tincidunt, nisi lacus ultrices tellus, sit amet ornare lectus dui vitae leo. Quisque iaculis sem a ultrices viverra. Aliquam bibendum pretium posuere. Sed mollis eget tortor sagittis gravida. Ut rutrum non sem at facilisis. Mauris quis orci lorem. Cras placerat ligula turpis, quis egestas libero rutrum eu. Etiam commodo vitae odio non ornare. Aliquam erat volutpat. Duis ut tincidunt urna, vel iaculis lorem. Praesent porttitor semper libero, quis sodales erat. Nunc vestibulum malesuada finibus. Phasellus ac interdum est. Curabitur molestie hendrerit libero, ac convallis quam mollis a. Sed hendrerit mauris interdum, malesuada eros at, vestibulum sem. Aliquam pharetra pulvinar eros, vitae tristique ante sollicitudin eget. In placerat interdum augue et mollis. Nunc lobortis elit quis purus elementum, eget iaculis nisl pretium. Ut felis justo, rhoncus sed tellus ac, aliquet eleifend neque. Donec maximus lorem quis nunc aliquet finibus. Nullam eget dignissim velit. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus fermentum tortor et mi interdum, nec ornare nulla hendrerit. Suspendisse nec velit quis erat mattis venenatis. Sed maximus felis vitae varius pretium. Vestibulum nec eros faucibus, pellentesque enim a, sodales metus. In non pretium nunc. Donec quam libero, viverra tempor bibendum vel, placerat vel tellus. Aliquam non scelerisque odio, convallis tincidunt ex. Donec a enim dui. Vivamus vel lacus rhoncus, faucibus ex in, sagittis sem. Phasellus non dui in neque egestas egestas sed id sem. Phasellus aliquam pellentesque velit a feugiat. Nulla facilisi. Vestibulum sed lorem eu eros consequat ornare nec quis ante. Ut vel velit quis mauris sodales finibus. Integer ut tortor purus. Quisque ac iaculis nunc. Sed varius, nisl eget egestas viverra, justo purus scelerisque lorem, et pharetra metus justo vel dui. Integer non tincidunt diam, id hendrerit lacus. Proin porta neque a augue gravida, quis eleifend magna hendrerit. Nullam posuere placerat neque, vel vulputate nunc viverra dignissim. Nulla vitae urna quis mauris auctor feugiat quis eu mauris. Cras congue a lacus ornare dictum. Mauris sed tristique magna, et posuere mauris. Sed hendrerit a tortor eget condimentum. Nam euismod urna ut metus vehicula, at facilisis arcu hendrerit. Integer erat justo, placerat eget urna eu, convallis faucibus libero. Phasellus vel orci arcu. Nullam eget feugiat magna. Suspendisse auctor dapibus neque, in accumsan elit posuere in. Etiam consequat sapien vitae odio commodo feugiat. Nunc non lacinia ligula, vel tempus nisi. Nullam risus purus, dapibus et erat posuere, efficitur aliquet augue. Donec orci purus, feugiat sit amet maximus et, sagittis sit amet velit. Aliquam eleifend ipsum massa, quis efficitur neque luctus eu. Aliquam ut cursus odio, a dictum massa. Mauris sodales sem eu mauris rhoncus commodo. Vestibulum elementum eros a leo dapibus cursus. Nam rutrum metus ut magna malesuada lobortis.\n"

	//
	ch <- "DONE"
}
